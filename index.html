<html>
<body>
    <p id="ins" style="position:absolute; left:480px; top:0px; color:#7f8c8d;">HOW2PLAY: Press [up arrow] or Click the button on the upper right corner</p>
    <div id="screen" style="position:absolute; left:0; top:0; width:480px; height:640px; background:#a9e2f3; overflow:hidden;">
        <p id="sc" style="position:absolute; left:16px; top:16px; font-family:FlappyBird; font-size:48px; color:#fff; z-index:1;">0|0</p>
        <img src="pages/bird/bird.png" alt="The bird" id="bird" style="position:absolute; left:64px; top:calc(50% - 24px); width:67px; height:48px; -ms-transform-origin:33px 24px; -webkit-transform-origin:33px 24px; transform-origin:33px 24px;">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p11" style="position:absolute; left:480px; top:0; width:80px;">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p12" style="position:absolute; left:480px; bottom:0; width:80px;">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph11" style="position:absolute; width:82px; height:36px; left:479px">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph12" style="position:absolute; width:82px; height:36px; left:479px">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p21" style="position:absolute; left:760px; top:0; width:80px;">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p22" style="position:absolute; left:760px; bottom:0; width:80px;">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph21" style="position:absolute; width:82px; height:36px; left:759px">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph22" style="position:absolute; width:82px; height:36px; left:759px">
    </div>
    <script>
        // ==========CREATE==========
        var plusy = 0, score = 0, hsc = 0;
        var p11 = document.getElementById('p11'), p12 = document.getElementById('p12'),
            ph11 = document.getElementById('ph11'), ph12 = document.getElementById('ph12'),
            p21 = document.getElementById('p21'), p22 = document.getElementById('p22'),
            ph21 = document.getElementById('ph21'), ph22 = document.getElementById('ph22');
            b = document.getElementById('bird');
        p11.style.height = Math.floor(Math.random()*280+80) + 'px';
        p12.style.height = 640-p11.offsetHeight-200 + 'px';
        ph11.style.top = p11.offsetHeight + 'px';
        ph12.style.bottom = 640 - p12.offsetTop + 'px';
        p21.style.height = Math.floor(Math.random()*280+80) + 'px';
        p22.style.height = 640-p21.offsetHeight-200 + 'px';
        ph21.style.top = p21.offsetHeight + 'px';
        ph22.style.bottom = 640 - p22.offsetTop + 'px';
        var tm = setInterval('main()',50);


        // ==========STEP==========
        function main() {
            // Colliding pipes||ground
            if ( b.offsetTop>=620 || b.offsetTop<0
                || (b.offsetTop<ph11.offsetTop+ph11.offsetHeight && ((b.offsetLeft+b.offsetWidth>p11.offsetLeft && b.offsetLeft+b.offsetWidth<p11.offsetLeft+p11.offsetWidth) || (b.offsetLeft>p11.offsetLeft && b.offsetLeft<p11.offsetLeft+p11.offsetWidth)))
                || (b.offsetTop+b.offsetHeight>ph12.offsetTop && ((b.offsetLeft+b.offsetWidth>p12.offsetLeft && b.offsetLeft+b.offsetWidth<p12.offsetLeft+p12.offsetWidth) || (b.offsetLeft>p12.offsetLeft && b.offsetLeft<p12.offsetLeft+p12.offsetWidth)))
                || (b.offsetTop<ph21.offsetTop+ph21.offsetHeight && ((b.offsetLeft+b.offsetWidth>p21.offsetLeft && b.offsetLeft+b.offsetWidth<p21.offsetLeft+p21.offsetWidth) || (b.offsetLeft>p21.offsetLeft && b.offsetLeft<p21.offsetLeft+p21.offsetWidth)))
                || (b.offsetTop+b.offsetHeight>ph22.offsetTop && ((b.offsetLeft+b.offsetWidth>p22.offsetLeft && b.offsetLeft+b.offsetWidth<p22.offsetLeft+p22.offsetWidth) || (b.offsetLeft>p22.offsetLeft && b.offsetLeft<p22.offsetLeft+p22.offsetWidth))) ) {
                plusy = 0; score = 0; document.getElementById('sc').innerHTML = score + '|' + hsc;
                b.style.top = '240px';
                p11.style.left = '480px'; p12.style.left = '480px';
                p11.style.height = Math.floor(Math.random()*280+80) + 'px';
                p12.style.height = 640-p11.offsetHeight-200 + 'px';
                ph11.style.top = p11.offsetHeight + 'px';
                ph12.style.bottom = 640 - p12.offsetTop + 'px';
                ph11.style.left = '479px'; ph12.style.left = '479px';
                p21.style.left = '760px'; p22.style.left = '760px';
                p21.style.height = Math.floor(Math.random()*280+80) + 'px';
                p22.style.height = 640-p21.offsetHeight-200 + 'px';
                ph21.style.top = p21.offsetHeight + 'px';
                ph22.style.bottom = 640 - p22.offsetTop + 'px';
                ph21.style.left = '759px'; ph22.style.left = '759px';
            }

            // Move bird, pipes
            plusy+=1.5; $('#bird').css({top: '+=' + plusy + 'px'});
            document.getElementById('bird').style.transform = 'rotate(' + plusy*2 + 'deg)';
            if (plusy < -10) $('#bird').attr('src', 'pages/bird/bird2.png'); else $('#bird').attr('src', 'pages/bird/bird.png');
            $('#p11').css({left: '-=6px'}); $('#p12').css({left: '-=6px'});
            $('#ph11').css({left: '-=6px'}); $('#ph12').css({left: '-=6px'});
            $('#p21').css({left: '-=6px'}); $('#p22').css({left: '-=6px'});
            $('#ph21').css({left: '-=6px'}); $('#ph22').css({left: '-=6px'});

            // If pipes go out of screen
            if (p11.offsetLeft <= -80) {
                score ++; document.getElementById('sc').innerHTML = score + '|' + hsc;
                p11.style.left = '480px'; p12.style.left = '480px';
                p11.style.height = Math.floor(Math.random()*280+80) + 'px';
                p12.style.height = 640-p11.offsetHeight-200 + 'px';
                ph11.style.top = p11.offsetHeight + 'px';
                ph12.style.bottom = 640 - p12.offsetTop + 'px';
                ph11.style.left = '479px';
                ph12.style.left = '479px';
            }
            if (p21.offsetLeft <= -80) {
                score ++; document.getElementById('sc').innerHTML = score + '|' + hsc;
                p21.style.left = '480px'; p22.style.left = '480px';
                p21.style.height = Math.floor(Math.random()*280+80) + 'px';
                p22.style.height = 640-p21.offsetHeight-200 + 'px';
                ph21.style.top = p21.offsetHeight + 'px';
                ph22.style.bottom = 640 - p22.offsetTop + 'px';
                ph21.style.left = '479px';
                ph22.style.left = '479px';
            }

            // Highscore check
            if (score > hsc) {hsc = score; document.getElementById('sc').innerHTML = score + '|' + hsc;}
        }


        //  ==========LMB CLICK==========
        $('#screen').click(function(){
            plusy = -15;
        });

        //  ==========KEYPRESS==========
        document.onkeydown = function(e) {
            if (e.keyCode == 38) plusy = -15;
        }
    </script>
</body>
</html>
