<html>
<body>
    <p id="ins" style="position:absolute; left:480px; top:0px; color:#7f8c8d;">HOW2PLAY: Press [up arrow] or Click the button on the upper right corner</p>
    <div id="screen" style="position:absolute; left:0; top:0; width:480px; height:640px; background:#a9e2f3; overflow:hidden;">
        <p id="sc" style="position:absolute; left:16px; top:16px; font-family:FlappyBird; font-size:48px; color:#fff; z-index:1;">0|0</p>
        <img src="pages/bird/bird.png" alt="The bird" id="bird" style="position:absolute; left:64px; top:calc(50% - 24px); width:67px; height:48px; -ms-transform-origin:33px 24px; -webkit-transform-origin:33px 24px; transform-origin:33px 24px;">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p11" style="position:absolute; left:480px; top:0; width:80px;">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p12" style="position:absolute; left:480px; bottom:0; width:80px;">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph11" style="position:absolute; width:82px; height:36px; left:479px">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph12" style="position:absolute; width:82px; height:36px; left:479px">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p21" style="position:absolute; left:760px; top:0; width:80px;">
        <img src="pages/bird/pipe.png" alt="Pipe" id="p22" style="position:absolute; left:760px; bottom:0; width:80px;">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph21" style="position:absolute; width:82px; height:36px; left:759px">
        <img src="pages/bird/pipeh.png" alt="Pipe" id="ph22" style="position:absolute; width:82px; height:36px; left:759px">
    </div>
    <script>
        // ==========CREATE==========
        var plusy = 0,
          score = 0,
          hsc = 0;
        var p1 = document.getElementById('p1'),
          p2 = document.getElementById('p2'),
          ph1 = document.getElementById('ph1'),
          ph2 = document.getElementById('ph2'),
          b = document.getElementById('bird');
        p1.style.height = Math.floor(Math.random() * 280 + 80) + 'px';
        p2.style.height = 640 - p1.offsetHeight - 200 + 'px';
        ph1.style.top = p1.offsetHeight + 'px';
        ph2.style.bottom = 640 - p2.offsetTop + 'px';
        var tm = setInterval('main()', 50);

        // ==========STEP==========
        function main() {
          // Colliding pipes||ground
          if (b.offsetTop >= 620 || b.offsetTop < 0 ||
            (b.offsetTop < ph1.offsetTop + ph1.offsetHeight && ((b.offsetLeft + b.offsetWidth > p1.offsetLeft && b.offsetLeft + b.offsetWidth < p1.offsetLeft + p1.offsetWidth) || (b.offsetLeft > p1.offsetLeft && b.offsetLeft < p1.offsetLeft + p1.offsetWidth))) ||
            (b.offsetTop + b.offsetHeight > ph2.offsetTop && ((b.offsetLeft + b.offsetWidth > p2.offsetLeft && b.offsetLeft + b.offsetWidth < p2.offsetLeft + p2.offsetWidth) || (b.offsetLeft > p2.offsetLeft && b.offsetLeft < p2.offsetLeft + p2.offsetWidth)))) {
            plusy = 0; score = 0;
            document.getElementById('sc').innerHTML = score + ':' + hsc;
            b.style.top = '240px';
            p1.style.left = '480px';
            p2.style.left = '480px';
            p1.style.height = Math.floor(Math.random() * 280 + 80) + 'px';
            p2.style.height = 640 - p1.offsetHeight - 200 + 'px';
            ph1.style.top = p1.offsetHeight + 'px';
            ph2.style.bottom = 640 - p2.offsetTop + 'px';
            ph1.style.left = '479px';
            ph2.style.left = '479px';
          }

          // Move bird, pipes
          plusy += 3;
          b.style.top = b.offsetTop+plusy + 'px';
          b.style.transform = 'rotate(' + Math.min(plusy*2, 90) + 'deg)';
          if (plusy < -10) b.src = 'bird2.png';
          else b.src = 'bird.png';
          p1.style.left = p1.offsetLeft-8 + 'px';
          p2.style.left = p2.offsetLeft-8 + 'px';
          ph1.style.left = ph1.offsetLeft-8 + 'px';
          ph2.style.left = ph2.offsetLeft-8 + 'px';

          // If pipes go out of screen
          if (p1.offsetLeft <= -80) {
            score++;
            document.getElementById('sc').innerHTML = score + ':' + hsc;
            p1.style.left = '480px';
            p2.style.left = '480px';
            p1.style.height = Math.floor(Math.random() * 280 + 80) + 'px';
            p2.style.height = 640 - p1.offsetHeight - 200 + 'px';
            ph1.style.top = p1.offsetHeight + 'px';
            ph2.style.bottom = 640 - p2.offsetTop + 'px';
            ph1.style.left = '479px';
            ph2.style.left = '479px'
          }

          // Highscore check
          if (score > hsc) {
            hsc = score;
            document.getElementById('sc').innerHTML = score + ':' + hsc
          }
        }

        //  ==========LMB CLICK==========
        document.getElementById('screen').onclick = function() {
          plusy = -24
        }

        //  ==========KEYPRESS==========
        document.onkeydown = function(e) {
          if (e.keyCode == 38 || e.keyCode == 32) plusy = -24
        }
    </script>
</body>
</html>
